# Phase 2 テスト手順書

## テスト環境
- Node.js: v18以上
- React: v18
- TypeScript: v5

## テスト項目

### 1. ビルドテスト

#### 1.1 TypeScript型チェック
```bash
npx tsc --noEmit
```

**期待結果**: エラーなくコンパイルが成功すること

#### 1.2 開発サーバー起動テスト
```bash
npm start
```

**期待結果**: 
- 開発サーバーが正常に起動すること
- ブラウザでアプリケーションが表示されること
- コンポーネントが正しくレンダリングされること

#### 1.3 プロダクションビルドテスト
```bash
npm run build
```

**期待結果**: エラーなくビルドが成功すること

### 2. コンポーネント動作テスト

#### 2.1 TopNavコンポーネント
**テスト手順**:
1. アプリケーションを起動
2. 上部のナビゲーションバーが表示されることを確認
3. 「設定」ボタンをクリック
4. プライバシー設定パネルが表示されることを確認
5. 各プライバシーレベルを選択して切り替えが動作することを確認

**期待結果**:
- [ ] ナビゲーションバーが正しく表示される
- [ ] 設定パネルの開閉が動作する
- [ ] プライバシーレベルの切り替えが動作する
- [ ] モバイル表示でメニューボタンが表示される

#### 2.2 AssetListSidebarコンポーネント
**テスト手順**:
1. 左側のサイドバーが表示されることを確認
2. 資産リストが表示されることを確認
3. 評価額の合計が表示されることを確認
4. 資産項目をクリックして選択状態が変わることを確認

**期待結果**:
- [ ] サイドバーが正しく表示される
- [ ] 資産リストが表示される
- [ ] 評価額KPIが正しく計算・表示される
- [ ] クリック時の選択状態が視覚的に分かる

#### 2.3 MapViewコンポーネント
**テスト手順**:
1. 地図が表示されることを確認
2. 地図/航空写真の切り替えボタンをクリック
3. レイヤーボタン（右下）をクリック
4. 各レイヤーのトグルが動作することを確認
5. 検索フィールドに入力できることを確認

**期待結果**:
- [ ] 地図が正しく表示される
- [ ] 地図モードの切り替えが動作する
- [ ] レイヤーパネルの表示/非表示が動作する
- [ ] プライバシーレベルに応じてレイヤーが制限される
- [ ] 検索入力フィールドが動作する

#### 2.4 PropertySlideOverコンポーネント
**テスト手順**:
1. 資産を選択して詳細パネルを開く（実装による）
2. パネルがスライドして表示されることを確認
3. 物件情報が表示されることを確認
4. 関連する提案が表示されることを確認
5. 閉じるボタンでパネルが閉じることを確認

**期待結果**:
- [ ] スライドアニメーションで表示される
- [ ] 物件情報が正しく表示される
- [ ] 関連提案がフィルタリングされて表示される
- [ ] 閉じるボタンが動作する

#### 2.5 ProposalSectionコンポーネント
**テスト手順**:
1. 提案セクションが表示されることを確認
2. 提案テーブルの内容を確認
3. 種別バッジの色分けを確認
4. NPV計算値が表示されることを確認

**期待結果**:
- [ ] 提案テーブルが正しく表示される
- [ ] 種別に応じたバッジの色分けが適用される
- [ ] 価格/賃料のフォーマットが正しい
- [ ] NPV計算値が表示される

### 3. レスポンシブテスト

#### 3.1 モバイル表示
**テスト手順**:
1. ブラウザの開発者ツールでモバイル表示に切り替え
2. メニューボタンが表示されることを確認
3. メニューボタンをクリックしてサイドバーが表示されることを確認
4. サイドバー外をクリックして閉じることを確認

**期待結果**:
- [ ] モバイル表示でレイアウトが崩れない
- [ ] メニューボタンが表示される
- [ ] サイドバーのトグルが動作する
- [ ] オーバーレイが正しく表示される

### 4. 統合テスト

#### 4.1 全体的な動作確認
**テスト手順**:
1. アプリケーションを起動
2. 各コンポーネントが正しく表示されることを確認
3. プライバシーレベルを変更してレイヤー制限が動作することを確認
4. 資産を選択して詳細画面への遷移を確認

**期待結果**:
- [ ] すべてのコンポーネントが正しく表示される
- [ ] コンポーネント間の連携が正しく動作する
- [ ] エラーが発生しない
- [ ] パフォーマンスに問題がない

### 5. コンソールエラーチェック

#### 5.1 ブラウザコンソール確認
**テスト手順**:
1. ブラウザの開発者ツールを開く
2. Consoleタブを確認
3. エラーや警告がないことを確認

**期待結果**:
- [ ] エラーが表示されない
- [ ] 重要な警告が表示されない

## テスト実行コマンド一覧

```bash
# TypeScript型チェック
npx tsc --noEmit

# 開発サーバー起動
npm start

# プロダクションビルド
npm run build
```

## トラブルシューティング

### よくあるエラーと対処法

#### 1. インポートエラー
- コンポーネントのパスが正しいか確認
- index.tsでのエクスポートが正しいか確認

#### 2. 型エラー
- Phase 1で作成した型定義が正しくインポートされているか確認
- プロパティの型が一致しているか確認

#### 3. レンダリングエラー
- コンポーネントの必須プロパティが渡されているか確認
- 条件付きレンダリングのロジックを確認

## 合格基準

以下の条件を全て満たした場合、Phase 2のテストは合格とします：

1. TypeScript型チェックがエラーなく完了
2. 開発サーバーが正常に起動し、アプリケーションが表示される
3. プロダクションビルドが成功
4. すべてのコンポーネントが正しく動作
5. レスポンシブ表示が正しく動作
6. コンソールに重大なエラーが表示されない
7. コンポーネント間の連携が正しく動作

## テスト完了後の作業

1. テスト結果を記録
2. 問題があった場合は修正を実施
3. 全てのテストが合格したらcommit & pushを実行